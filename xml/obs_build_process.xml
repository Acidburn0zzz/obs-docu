<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter version="5.1" xml:id="cha.obs.build_process"
 xmlns="http://docbook.org/ns/docbook"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink" >
 <title>Build Process</title>
 <info/>
 <para> Each package build is done in a fresh environment. This is done to
  ensure that no dependencies are missing and every later build produces
  identical results. </para>
 <sect1>
  <title>How is a build process defined</title>
  <para> ... </para>
 </sect1>
 <sect1>
  <title>How does a build process work</title>
  <para> All sources and binaries which are hosted inside of OBS are organized
   in projects. Projects do host in sources inside of package containers again.
   The sources get build according to the repository configuration inside of
   the project. </para>
  <sect2>
   <title>Preinstall phase</title>
   <para> The step of this phase depends on the type of the buildroot (building
    environment). OBS supports three different types buildroot: </para>
    <itemizedlist>
     <listitem>
      <para> chroot </para>
     </listitem>
     <listitem>
      <para> XEN </para>
     </listitem>
     <listitem>
      <para> KVM </para>
     </listitem>
    </itemizedlist> 
    <para>
    In the preinstall phase, the OBS Worker creates a small
    base system (chroot or VM Image) with manually extracted packages (file
    system, coreutils, binutils, rpm/debutils, etc.), copies all necessary
    build requirements into the base system. </para>
  </sect2>
  <sect2>
   <title>Install Phase</title>
   <para> Depending of the chosen build root the worker starts the XEN/KVM
    virtual machine or enters the build root. If this was successful the
    install phase reinstalls all base package from above and additionally all
    packages you have defined in your package recipe. After this phase the
    environment is ready to process the recipe. </para>
  </sect2>
  <sect2>
   <title>Package build</title>
   <para> Regarding the package type the buildroot executes different build
    commands. On RPM-based distributions it is called "rpmbuild". On
    Debian-based distributions, it is "dpkg-buildpackage" and on Arch Linux you
    use "pacman". Now everything depends on the quality and the type of your
    build recipe. In most cases the source code will be compiled now and get
    packed into the specific package format. On RPM based distributions there
    are additional security and cleanness checks called rpmlint, which have the
    goal to improve the quality of the packages. </para>
  </sect2>
  <sect2>
   <title>Post build steps</title>
   <para> The generated packages are taken from the Worker get signed by the
    OBS Signer and are published to the Repository. </para>
  </sect2>
 </sect1>
 <sect1>
  <title>Different ways to build</title>
  <para> ... </para>
 </sect1>
 <sect1>
  <title>Security aspects</title>
  <para> ... </para>
 </sect1>
</chapter>
